<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Consulta de Produtos ‚Äì Grilazer</title>
  <style>
    :root{
      --bg1:#0ea5e9; --bg2:#38bdf8;
      --text:#0f172a; --card:#ffffff;
      --muted:#64748b; --border:#e2e8f0;
      --primary:#2563eb; --primary-soft:#dbeafe;
      --danger:#ef4444; --ok:#16a34a;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
      color:var(--text);
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
    }
    .wrap{
      width:100%;
      max-width:1100px;
    }
    .header{
      display:flex;
      justify-content:space-between;
      gap:12px;
      align-items:center;
      color:#fff;
      margin-bottom:12px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .logo{
      width:40px;height:40px;
      border-radius:14px;
      background:#ffffff1f;
      border:1px solid #ffffff3d;
      display:grid;
      place-items:center;
      font-weight:900;
      font-size:18px;
    }
    h1{
      font-size:20px;
      font-weight:900;
    }
    .header-sub{
      font-size:12px;
      opacity:.9;
    }
    .version{
      font-size:11px;
      opacity:.7;
      text-align:right;
    }

    .grid{
      display:grid;
      grid-template-columns:380px 1fr;
      gap:12px;
    }
    .card{
      background:var(--card);
      border-radius:18px;
      border:1px solid var(--border);
      box-shadow:0 12px 40px rgba(15,23,42,.18);
      padding:14px;
    }
    .card-title{
      font-weight:700;
      font-size:14px;
      margin-bottom:6px;
    }
    label{
      display:block;
      font-size:12px;
      font-weight:600;
      margin-bottom:4px;
      color:var(--muted);
    }
    .input-row{
      display:flex;
      gap:8px;
      align-items:flex-end;
    }
    input[type="text"]{
      width:100%;
      padding:9px 10px;
      border-radius:10px;
      border:1px solid var(--border);
      font-size:13px;
      outline:none;
    }
    input[type="text"]:focus{
      border-color:var(--primary);
      box-shadow:0 0 0 1px var(--primary-soft);
    }
    button{
      border:none;
      border-radius:10px;
      padding:9px 12px;
      font-size:13px;
      font-weight:700;
      cursor:pointer;
    }
    .btn-primary{
      background:var(--primary);
      color:#fff;
    }
    .btn-outline{
      background:#fff;
      color:var(--primary);
      border:1px solid var(--primary-soft);
    }

    .helper{
      font-size:11px;
      color:var(--muted);
      margin-top:6px;
    }

    .status{
      margin-top:8px;
      font-size:12px;
    }
    .status-ok{color:var(--ok);}
    .status-err{color:var(--danger);}
    .status-muted{color:var(--muted);}

    /* Resultado */
    .produto-top{
      display:flex;
      gap:12px;
      align-items:flex-start;
      margin-bottom:8px;
    }
    .foto{
      width:96px;height:96px;
      border-radius:16px;
      border:1px dashed var(--border);
      background:#f8fafc;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:11px;
      color:var(--muted);
      text-align:center;
      padding:6px;
    }
    .produto-info h2{
      font-size:16px;
      margin-bottom:4px;
    }
    .produto-ref{
      font-size:11px;
      font-weight:700;
      color:var(--primary);
      background:var(--primary-soft);
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      margin-bottom:4px;
    }
    .produto-tags{
      display:flex;
      flex-wrap:wrap;
      gap:4px;
      margin-top:4px;
    }
    .tag{
      font-size:10px;
      padding:2px 6px;
      border-radius:999px;
      border:1px solid var(--border);
      background:#f9fafb;
    }
    .desc{
      font-size:12px;
      color:var(--muted);
      margin-top:4px;
    }

    .specs-title{
      font-size:12px;
      font-weight:700;
      margin-top:6px;
      margin-bottom:4px;
    }
    .specs-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
      gap:6px;
      font-size:11px;
    }
    .spec-item{
      background:#f9fafb;
      border-radius:10px;
      padding:6px 8px;
      border:1px solid var(--border);
    }
    .spec-label{
      font-weight:600;
      color:var(--muted);
      margin-bottom:2px;
    }
    .spec-value{
      font-size:11px;
    }

    .history{
      margin-top:10px;
      border-top:1px dashed var(--border);
      padding-top:6px;
    }
    .history-title{
      font-size:11px;
      font-weight:700;
      color:var(--muted);
      margin-bottom:4px;
    }
    .history-tags{
      display:flex;
      flex-wrap:wrap;
      gap:4px;
    }
    .history-tag{
      font-size:11px;
      padding:3px 7px;
      border-radius:999px;
      background:#f1f5f9;
      border:1px solid var(--border);
      cursor:pointer;
    }

    @media (max-width:900px){
      .grid{grid-template-columns:1fr;}
    }
    @media (max-width:600px){
      h1{font-size:18px;}
      .card{padding:12px;}
      .produto-top{flex-direction:row;}
      .foto{width:80px;height:80px;}
    }
  </style>
</head>
<body>
<div class="wrap">
  <header class="header">
    <div class="brand">
      <div class="logo">GR</div>
      <div>
        <h1>Consulta de Produtos</h1>
        <div class="header-sub">Digite a <b>Refer√™ncia</b> para visualizar as caracter√≠sticas t√©cnicas.</div>
      </div>
    </div>
    <div class="version">
      Grilazer<br>
      <span id="today"></span>
    </div>
  </header>

  <main class="grid">
    <!-- LADO ESQUERDO: BUSCA -->
    <section class="card">
      <div class="card-title">Buscar pela Refer√™ncia</div>
      <label for="refInput">Refer√™ncia do produto</label>
      <div class="input-row">
        <input id="refInput" type="text" placeholder="Ex.: GR0026, GR0030, etc.">
        <button class="btn-primary" id="btnBuscar">Buscar</button>
      </div>
      <div class="helper">
        ‚Ä¢ Campo baseado na coluna <b>Refer√™ncia</b> da planilha.<br>
        ‚Ä¢ Voc√™ tamb√©m pode pressionar <b>Enter</b> ap√≥s digitar.
      </div>

      <div class="status status-muted" id="statusMsg">
        Digite uma refer√™ncia e clique em Buscar.
      </div>

      <div class="history" id="historyBox" style="display:none;">
        <div class="history-title">Refer√™ncias recentes</div>
        <div class="history-tags" id="historyTags"></div>
      </div>
    </section>

    <!-- LADO DIREITO: RESULTADO -->
    <section class="card" id="resultadoCard" style="opacity:0.5;">
      <div class="card-title">Informa√ß√µes do produto</div>
      <div id="semResultado" class="helper">
        Nenhum produto selecionado. Fa√ßa uma busca pela refer√™ncia.
      </div>

      <div id="resultado" style="display:none;">
        <div class="produto-top">
          <div class="foto" id="fotoBox">
            Foto n√£o dispon√≠vel
          </div>
          <div class="produto-info">
            <div class="produto-ref" id="refBox">REF-0000</div>
            <h2 id="nomeBox">Nome do produto</h2>
            <div class="produto-tags" id="tagsBox"></div>
            <p class="desc" id="descBox"></p>
          </div>
        </div>

        <div class="specs">
          <div class="specs-title">Caracter√≠sticas t√©cnicas</div>
          <div class="specs-grid" id="specsGrid"></div>
        </div>
      </div>
    </section>
  </main>
</div>

<script>
  // üîπ Base EXEMPLO ‚Äì aqui voc√™ vai substituir pelos dados reais da planilha
  // Cada item representa uma linha da planilha CARACTER√çSTICAS, coluna "Refer√™ncia"
  const produtos = [
    {
      referencia: "GR0026", // COLUNA Refer√™ncia
      nome: "GRELHA INOX DUPLA 36X50CM",
      descricao: "Grelha em a√ßo inox dupla, ideal para churrasqueiras residenciais.",
      tags: ["INOX", "Linha Churrasqueiras", "Dupla"],
      foto: "", // pode colocar URL da imagem se quiser
      specs: {
        "Largura (cm)": "36",
        "Comprimento (cm)": "79,5",
        "Material": "A√ßo Inox",
        "Peso L√≠quido (kg)": "1,41"
      }
    },
    {
      referencia: "GR0030",
      nome: "GRELHA INOX PARRILLA 60X50CM",
      descricao: "Modelo parrilla em inox, ideal para cortes especiais.",
      tags: ["INOX", "Parrilla"],
      foto: "",
      specs: {
        "Largura (cm)": "60",
        "Comprimento (cm)": "79,5",
        "Material": "A√ßo Inox",
        "Peso L√≠quido (kg)": "2,935"
      }
    }
    // ‚ûú daqui pra baixo voc√™ replica as linhas da planilha
    //   mantendo o campo 'referencia' igual √† coluna "Refer√™ncia"
  ];

  const refInput   = document.getElementById("refInput");
  const btnBuscar  = document.getElementById("btnBuscar");
  const statusMsg  = document.getElementById("statusMsg");

  const resultadoCard = document.getElementById("resultadoCard");
  const semResultado  = document.getElementById("semResultado");
  const resultado     = document.getElementById("resultado");

  const refBox   = document.getElementById("refBox");
  const nomeBox  = document.getElementById("nomeBox");
  const descBox  = document.getElementById("descBox");
  const tagsBox  = document.getElementById("tagsBox");
  const fotoBox  = document.getElementById("fotoBox");
  const specsGrid = document.getElementById("specsGrid");

  const historyBox  = document.getElementById("historyBox");
  const historyTags = document.getElementById("historyTags");

  function normalizarReferencia(ref){
    return (ref || "").toString().trim().toUpperCase();
  }

  function salvarHistorico(ref){
    const key = "hist_referencias";
    let lista = [];
    try{
      const raw = localStorage.getItem(key);
      if(raw) lista = JSON.parse(raw) || [];
    }catch{}
    lista = lista.filter(r => r !== ref);
    lista.unshift(ref);
    if(lista.length > 8) lista = lista.slice(0,8);
    localStorage.setItem(key, JSON.stringify(lista));
    renderHistorico();
  }

  function renderHistorico(){
    const key = "hist_referencias";
    let lista = [];
    try{
      const raw = localStorage.getItem(key);
      if(raw) lista = JSON.parse(raw) || [];
    }catch{}
    if(!lista.length){
      historyBox.style.display = "none";
      return;
    }
    historyBox.style.display = "block";
    historyTags.innerHTML = "";
    lista.forEach(ref=>{
      const btn = document.createElement("button");
      btn.className = "history-tag";
      btn.textContent = ref;
      btn.addEventListener("click", ()=>{
        refInput.value = ref;
        buscarProduto();
      });
      historyTags.appendChild(btn);
    });
  }

  function mostrarProduto(prod){
    semResultado.style.display = "none";
    resultado.style.display = "block";
    resultadoCard.style.opacity = "1";

    refBox.textContent  = prod.referencia || "";
    nomeBox.textContent = prod.nome || "";
    descBox.textContent = prod.descricao || "";

    tagsBox.innerHTML = "";
    (prod.tags || []).forEach(t=>{
      const span = document.createElement("span");
      span.className = "tag";
      span.textContent = t;
      tagsBox.appendChild(span);
    });

    if(prod.foto){
      fotoBox.innerHTML = "";
      fotoBox.style.backgroundImage = `url('${prod.foto}')`;
      fotoBox.style.backgroundSize = "cover";
      fotoBox.style.backgroundPosition = "center";
    } else {
      fotoBox.style.backgroundImage = "none";
      fotoBox.textContent = "Foto n√£o dispon√≠vel";
    }

    specsGrid.innerHTML = "";
    if(prod.specs){
      Object.entries(prod.specs).forEach(([label, value])=>{
        const div = document.createElement("div");
        div.className = "spec-item";
        div.innerHTML = `
          <div class="spec-label">${label}</div>
          <div class="spec-value">${value}</div>
        `;
        specsGrid.appendChild(div);
      });
    }
  }

  function limparResultado(){
    semResultado.style.display = "block";
    resultado.style.display = "none";
    resultadoCard.style.opacity = "0.5";
    specsGrid.innerHTML = "";
    tagsBox.innerHTML = "";
  }

  function buscarProduto(){
    const refRaw = refInput.value;
    const ref = normalizarReferencia(refRaw);

    if(!ref){
      statusMsg.textContent = "Digite uma refer√™ncia para fazer a busca.";
      statusMsg.className = "status status-muted";
      limparResultado();
      return;
    }

    // üëâ Busca usando a coluna Refer√™ncia (campo prod.referencia)
    const prod = produtos.find(p => normalizarReferencia(p.referencia) === ref) || null;

    if(!prod){
      statusMsg.textContent = "Nenhum produto encontrado para a refer√™ncia: " + ref;
      statusMsg.className = "status status-err";
      limparResultado();
      return;
    }

    statusMsg.textContent = "Produto encontrado.";
    statusMsg.className = "status status-ok";
    mostrarProduto(prod);
    salvarHistorico(ref);
  }

  btnBuscar.addEventListener("click", buscarProduto);
  refInput.addEventListener("keypress", (ev)=>{
    if(ev.key === "Enter"){
      ev.preventDefault();
      buscarProduto();
    }
  });

  document.getElementById("today").textContent =
    new Date().toLocaleDateString("pt-BR");

  renderHistorico();
</script>
</body>
</html>
