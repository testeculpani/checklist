<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <title>Impress√£o de Etiquetas Zebra</title>
  <style>
    :root {
      --cor-primaria: #0f766e;
      --cor-primaria-escura: #0b524d;
      --bg-claro: #f1f5f9;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      background: #0f172a;
      color: #0f172a;
      display: flex;
      justify-content: center;
      padding: 24px;
    }

    .app {
      background: white;
      width: 100%;
      max-width: 960px;
      border-radius: 16px;
      padding: 20px 24px 28px;
      box-shadow:
        0 18px 45px rgba(15, 23, 42, 0.4),
        0 0 0 1px rgba(15, 23, 42, 0.4);
    }

    h1 {
      margin: 0 0 4px;
      font-size: 22px;
      color: #0f172a;
    }

    .subtitulo {
      font-size: 13px;
      color: #64748b;
      margin-bottom: 18px;
    }

    .linha {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 12px;
    }

    .campo {
      flex: 1;
      min-width: 180px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
    }

    label {
      font-weight: 600;
      color: #0f172a;
    }

    input[type="text"],
    input[type="number"] {
      border-radius: 8px;
      border: 1px solid #cbd5f5;
      padding: 7px 9px;
      font-size: 13px;
      outline: none;
      background: #f8fafc;
    }

    input[type="text"]:focus,
    input[type="number"]:focus {
      border-color: var(--cor-primaria);
      box-shadow: 0 0 0 1px rgba(15, 118, 110, 0.25);
      background: #ffffff;
    }

    .botoes {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 6px 0 16px;
    }

    button {
      border-radius: 999px;
      border: none;
      padding: 8px 16px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: transform 0.05s ease, box-shadow 0.1s ease, background 0.1s ease;
    }

    .btn-primario {
      background: var(--cor-primaria);
      color: white;
      box-shadow: 0 8px 18px rgba(15, 118, 110, 0.45);
    }

    .btn-primario:hover {
      background: var(--cor-primaria-escura);
      transform: translateY(-1px);
      box-shadow: 0 10px 24px rgba(15, 118, 110, 0.6);
    }

    .btn-secundario {
      background: #e2e8f0;
      color: #0f172a;
    }

    .btn-secundario:hover {
      background: #cbd5f5;
    }

    .icone {
      font-size: 14px;
    }

    .cartao {
      background: var(--bg-claro);
      border-radius: 12px;
      padding: 10px 12px;
      margin-bottom: 14px;
      border: 1px solid #e2e8f0;
    }

    .cartao-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .cartao-titulo {
      font-size: 14px;
      font-weight: 600;
      color: #0f172a;
    }

    .cartao-subtitulo {
      font-size: 11px;
      color: #64748b;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    th, td {
      border-bottom: 1px solid #e2e8f0;
      padding: 6px 4px;
      text-align: left;
    }

    th {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: #6b7280;
    }

    tbody tr:hover {
      background: rgba(15, 118, 110, 0.05);
    }

    .col-qtde {
      text-align: center;
      width: 60px;
    }

    .col-acoes {
      width: 70px;
      text-align: center;
    }

    .tag-total {
      font-size: 11px;
      color: #475569;
    }

    .tag-total strong {
      color: #0f172a;
    }

    .link-menor {
      font-size: 11px;
      color: #64748b;
    }

    .btn-mini {
      padding: 4px 10px;
      font-size: 11px;
      border-radius: 999px;
      background: #fee2e2;
      color: #b91c1c;
      border: none;
      cursor: pointer;
    }

    .btn-mini:hover {
      background: #fecaca;
    }

    /* √ÅREA DAS ETIQUETAS (VISUALIZA√á√ÉO) */
    #previewEtiquetas {
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .preview-etiqueta {
      border: 1px dashed #cbd5f5;
      border-radius: 8px;
      padding: 6px 8px;
      min-width: 180px;
      max-width: 220px;
      font-size: 11px;
      background: white;
    }

    .preview-etiqueta-codigo {
      font-weight: 700;
      font-size: 13px;
      margin-bottom: 2px;
    }

    .preview-etiqueta-descricao {
      font-size: 11px;
      color: #475569;
    }

    /* √ÅREA REAL DE IMPRESS√ÉO */
    #etiquetasParaImprimir {
      display: none; /* s√≥ aparece na impress√£o */
    }

    /* UMA ETIQUETA POR P√ÅGINA */
    .etiqueta-print {
      width: 100%;
      height: 100%;
      padding: 4mm;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
    }

    .etiqueta-codigo {
      font-size: 18px;
      font-weight: 700;
    }

    .etiqueta-descricao {
      font-size: 12px;
      margin-top: 2px;
    }

    .etiqueta-extra {
      font-size: 10px;
      margin-top: 2px;
      color: #4b5563;
    }

    /* CONFIGURA√á√ïES ESPEC√çFICAS PARA IMPRESS√ÉO */
    @page {
      /* AJUSTE AQUI para o tamanho da etiqueta da sua Zebra */
      size: 60mm 30mm;
      margin: 0;
    }

    @media print {
      body {
        background: #ffffff;
        padding: 0;
      }

      .app {
        box-shadow: none;
        border-radius: 0;
        padding: 0;
      }

      /* Esconde interface e mostra s√≥ as etiquetas */
      .linha,
      .botoes,
      .cartao,
      h1,
      .subtitulo,
      #previewEtiquetas {
        display: none !important;
      }

      #etiquetasParaImprimir {
        display: block !important;
      }

      .etiqueta-print {
        page-break-after: always; /* cada etiqueta em uma ‚Äúp√°gina‚Äù (etiqueta) */
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>Impress√£o de Etiquetas ‚Äì Zebra</h1>
    <div class="subtitulo">
      Digite c√≥digo, descri√ß√£o e quantidade. Depois gere as etiquetas e mande imprimir escolhendo a impressora Zebra.
    </div>

    <div class="linha">
      <div class="campo">
        <label for="codigo">C√≥digo</label>
        <input type="text" id="codigo" placeholder="Ex: 12345">
      </div>
      <div class="campo">
        <label for="descricao">Descri√ß√£o</label>
        <input type="text" id="descricao" placeholder="Nome do produto / info da etiqueta">
      </div>
      <div class="campo" style="max-width: 120px;">
        <label for="qtde">Qtde etiquetas</label>
        <input type="number" id="qtde" min="1" value="1">
      </div>
    </div>

    <div class="botoes">
      <button class="btn-primario" onclick="adicionarItem()">
        <span class="icone">‚ûï</span> Adicionar √† lista
      </button>
      <button class="btn-secundario" onclick="limparLista()">
        <span class="icone">üßπ</span> Limpar lista
      </button>
      <button class="btn-primario" style="margin-left:auto;" onclick="gerarEtiquetasEImprimir()">
        <span class="icone">üñ®Ô∏è</span> Gerar etiquetas e imprimir
      </button>
    </div>

    <div class="cartao">
      <div class="cartao-header">
        <div>
          <div class="cartao-titulo">Itens para impress√£o</div>
          <div class="cartao-subtitulo">Cada linha pode gerar v√°rias etiquetas, conforme a quantidade.</div>
        </div>
        <div class="tag-total">
          Total de etiquetas: <strong id="totalEtiquetas">0</strong>
        </div>
      </div>

      <div style="overflow-x:auto;">
        <table>
          <thead>
            <tr>
              <th style="width: 90px;">C√≥digo</th>
              <th>Descri√ß√£o</th>
              <th class="col-qtde">Qtde</th>
              <th class="col-acoes">A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="tabelaItens">
            <!-- Linhas adicionadas via JS -->
          </tbody>
        </table>
      </div>
      <div style="margin-top:6px;" class="link-menor">
        Dica: ajuste o tamanho de p√°gina da Zebra (ex.: 60 x 30 mm) nas propriedades da impressora antes de imprimir.
      </div>
    </div>

    <div>
      <div class="cartao-header">
        <div class="cartao-titulo">Pr√©-visualiza√ß√£o das etiquetas</div>
        <div class="cartao-subtitulo">Exemplo visual (n√£o √© exatamente o tamanho real).</div>
      </div>
      <div id="previewEtiquetas">
        <!-- Preview de algumas etiquetas (limite para n√£o pesar a tela) -->
      </div>
    </div>

    <!-- √ÅREA OCULTA ‚Äì USADA NA IMPRESS√ÉO -->
    <div id="etiquetasParaImprimir"></div>
  </div>

  <script>
    let itens = [];

    function atualizarTabela() {
      const tbody = document.getElementById('tabelaItens');
      tbody.innerHTML = '';

      let total = 0;

      itens.forEach((item, index) => {
        total += item.qtde;

        const tr = document.createElement('tr');

        const tdCodigo = document.createElement('td');
        tdCodigo.textContent = item.codigo;
        tr.appendChild(tdCodigo);

        const tdDesc = document.createElement('td');
        tdDesc.textContent = item.descricao;
        tr.appendChild(tdDesc);

        const tdQtde = document.createElement('td');
        tdQtde.className = 'col-qtde';
        tdQtde.textContent = item.qtde;
        tr.appendChild(tdQtde);

        const tdAcoes = document.createElement('td');
        tdAcoes.className = 'col-acoes';
        const btnRemover = document.createElement('button');
        btnRemover.className = 'btn-mini';
        btnRemover.textContent = 'Remover';
        btnRemover.onclick = () => removerItem(index);
        tdAcoes.appendChild(btnRemover);
        tr.appendChild(tdAcoes);

        tbody.appendChild(tr);
      });

      document.getElementById('totalEtiquetas').textContent = total;
      atualizarPreview();
    }

    function atualizarPreview() {
      const preview = document.getElementById('previewEtiquetas');
      preview.innerHTML = '';

      let contador = 0;
      const LIMITE_PREVIEW = 20; // pra n√£o travar a tela se tiver muita etiqueta

      itens.forEach(item => {
        for (let i = 0; i < item.qtde && contador < LIMITE_PREVIEW; i++) {
          contador++;

          const div = document.createElement('div');
          div.className = 'preview-etiqueta';

          const cod = document.createElement('div');
          cod.className = 'preview-etiqueta-codigo';
          cod.textContent = item.codigo || '(sem c√≥digo)';
          div.appendChild(cod);

          const desc = document.createElement('div');
          desc.className = 'preview-etiqueta-descricao';
          desc.textContent = item.descricao || '(sem descri√ß√£o)';
          div.appendChild(desc);

          preview.appendChild(div);
        }
      });

      if (contador === 0) {
        const vazio = document.createElement('div');
        vazio.className = 'preview-etiqueta';
        vazio.textContent = 'Nenhum item adicionado ainda.';
        preview.appendChild(vazio);
      } else if (contador >= 20) {
        const msg = document.createElement('div');
        msg.className = 'preview-etiqueta';
        msg.textContent = 'Pr√©via limitada a 20 etiquetas para n√£o travar. Na impress√£o sair√£o todas.';
        preview.appendChild(msg);
      }
    }

    function adicionarItem() {
      const codigo = document.getElementById('codigo').value.trim();
      const descricao = document.getElementById('descricao').value.trim();
      let qtde = parseInt(document.getElementById('qtde').value, 10);

      if (!codigo && !descricao) {
        alert('Preencha pelo menos o c√≥digo ou a descri√ß√£o.');
        return;
      }

      if (isNaN(qtde) || qtde < 1) {
        qtde = 1;
      }

      itens.push({ codigo, descricao, qtde });

      document.getElementById('codigo').value = '';
      document.getElementById('descricao').value = '';
      document.getElementById('qtde').value = '1';
      document.getElementById('codigo').focus();

      atualizarTabela();
    }

    function removerItem(index) {
      itens.splice(index, 1);
      atualizarTabela();
    }

    function limparLista() {
      if (!confirm('Tem certeza que deseja limpar a lista inteira?')) return;
      itens = [];
      atualizarTabela();
    }

    function gerarEtiquetasEImprimir() {
      if (itens.length === 0) {
        alert('Adicione pelo menos um item antes de imprimir.');
        return;
      }

      const container = document.getElementById('etiquetasParaImprimir');
      container.innerHTML = '';

      itens.forEach(item => {
        for (let i = 0; i < item.qtde; i++) {
          const div = document.createElement('div');
          div.className = 'etiqueta-print';

          const cod = document.createElement('div');
          cod.className = 'etiqueta-codigo';
          cod.textContent = item.codigo || '';
          div.appendChild(cod);

          const desc = document.createElement('div');
          desc.className = 'etiqueta-descricao';
          desc.textContent = item.descricao || '';
          div.appendChild(desc);

          container.appendChild(div);
        }
      });

      window.print();
    }

    // Inicializa preview vazio
    atualizarPreview();
  </script>
</body>
</html>
